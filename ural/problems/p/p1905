<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=utf-8"><META NAME="viewport" CONTENT="width=768"><META HTTP-EQUIV="X-UA-Compatible" CONTENT="IE=edge"><TITLE>1905. Travel in Time @ Timus Online Judge</TITLE><LINK REL="alternate" HREFLANG="x-default" HREF="/problem.aspx?num=1905"><LINK REL="alternate" HREFLANG="en-us" HREF="/problem.aspx?num=1905&amp;locale=en"><LINK REL="alternate" HREFLANG="ru-ru" HREF="/problem.aspx?num=1905&amp;locale=ru"><LINK REL="stylesheet" TYPE="text/css" HREF="/style50.css"><LINK REL="shortcut icon" TYPE="image/x-icon" HREF="/favicon.ico"></HEAD><BODY><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="body"><TR><TD CLASS="caption"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" CLASS="locale"><A HREF="/problem.aspx?num=1905&amp;locale=en">ENG</A>&nbsp;&nbsp;<A HREF="/problem.aspx?num=1905&amp;locale=ru">RUS</A></TD><TD CLASS="title"><A HREF="/">Timus Online Judge</A></TD><TD WIDTH="130"></TD></TR></TABLE></TD></TR><TR><TD CLASS="panel"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" VALIGN="TOP" ALIGN="CENTER" STYLE="padding-bottom:5px;"><A HREF="/"><IMG BORDER="0" SRC="/images/usu-summer.jpg" HEIGHT="134" WIDTH="106" ALT=""></A></TD><TD VALIGN="TOP" ALIGN="LEFT"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="panel"><TR><TH WIDTH="25%"><DIV>Online Judge</DIV></TH><TH WIDTH="25%"><DIV>Problems</DIV></TH><TH WIDTH="25%"><DIV>Authors</DIV></TH><TH WIDTH="25%"><DIV>Online contests</DIV></TH></TR><TR><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/">About Online Judge</A><BR><A HREF="/help.aspx?topic=faq">Frequently asked questions</A><BR><A HREF="/news.aspx">Site news</A><BR><A HREF="/forum/">Webboard</A><BR><A HREF="/help.aspx?topic=links">Links</A><BR></TD><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/problemset.aspx">Problem set</A><BR><A HREF="/submit.aspx">Submit solution</A><BR><A HREF="/status.aspx">Judge status</A><BR><A HREF="/help.aspx?topic=judge">Guide</A><BR></TD><TD VALIGN="TOP"><A HREF="/register.aspx">Register</A><BR><A HREF="/authedit.aspx">Update your info</A><BR><A HREF="/ranklist.aspx">Authors ranklist</A><BR><FORM ACTION="/search.aspx" METHOD="GET" STYLE="margin-top:0.6em;"><INPUT NAME="Str" SIZE="12" VALUE="" PLACEHOLDER="Author’s name"> <INPUT TYPE="SUBMIT" VALUE="Search"></FORM></TD><TD VALIGN="TOP"><A HREF="/contest.aspx">Current contest</A><BR><A HREF="/schedule.aspx">Scheduled contests</A><BR><A HREF="/archive.aspx">Past contests</A><BR><A HREF="/help.aspx?topic=contest">Rules</A><BR></TD></TR></TABLE></TD></TR></TABLE></TD></TR><TR><TD STYLE="padding-top: 32px; padding-bottom: 20px;"><TABLE ALIGN="CENTER" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="800"><DIV CLASS="problem_content"><H2 class="problem_title">1905. Travel in Time</H2><DIV class="problem_limits">Time limit: 3.0 second<BR>Memory limit: 64 MB<BR></DIV><DIV ID="problem_text"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The discovery of superluminal neutrinos gave birth to a whole chain of 
scientific achievements. At first, scientists were able to 
accelerate individual protons and neutrons to the superluminal speed, then the whole atoms, 
and soon small objects. But the most surprising effect was that the objects 
accelerated to the superluminal velocity along a closed 
path simply went into the past. Moreover, the construction of such an 
accelerator is so simple that even an ordinary microwave oven with a 
little refinement could send an unripe banana a week ago to make it ripe.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Although experiments on sending objects back gave excellent results, they 
did not always go smoothly. Sometimes an object that was sent back in time 
faced his version of the past. After one of such collisions a black hole 
appeared and managed to swallow half of the research laboratory 
before collapsing. Despite such incidents, the researchers continued to 
work on a stable displacement of large objects. Soon the transport ship 
&ldquo;Valkyrie-500&rdquo; entered mass production. With the help of 
superluminal drive it could arrive to the destination before the time of departure.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Intelligence reported that the rebel leader is coming to visit 
one of the distant planets. You, the most talented special agent, are 
delegated to destroy him at the moment of arrival before the press 
gets hold of him. You have a schedule of all flights of &ldquo;Valkyries&rdquo; in this 
sector of the Galaxy and the ability to use any of them. But remember that 
if you will be at least twice in the same planet at the same time, 
you risk facing yourself. Since such a meeting would likely be fatal, 
it cannot be allowed until the job is done.</DIV></DIV><H3 CLASS="problem_subtitle">Input</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The first line contains integers <i>n</i> and <i>m</i> that are the total 
number of planets in the sector and flights of &ldquo;Valkyries&rdquo; between them 
<nobr>(1 &le; <i>n</i> &le; 10<sup>5</sup>;</nobr> <nobr>0 &le; <i>m</i> &le; 10<sup>5</sup>)</nobr>. 
In the following <i>m</i> lines the flights are described. A description of 
each flight consists of the four integers: the numbers of planets of 
departure and arrival, time of departure and time of arrival. The last 
line consists of four integers: the number of the planet, where you 
are, the number of the planet which the rebel leader arrives to, the current time and the time when the rebel leader arrives. 
All moments of time are integers from 0 to 10<sup>6</sup>. 
The planets are numbered with integers from 1 to <i>n</i>. </DIV></DIV><H3 CLASS="problem_subtitle">Output</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">If the route does not exist, output &ldquo;Impossible&rdquo;. Otherwise, in the first
line output number <i>k</i>.  In the second line output <i>k</i> integers that are 
the numbers of flights which are used in the order of the route. If there are several 
ways to get to the destination, output any of them. Flights are 
numbered with integers from 1 to <i>m</i> in the same order as they are described in the input. </DIV></DIV><H3 CLASS="problem_subtitle">Sample</H3><TABLE CLASS="sample"><TR><TH WIDTH="350">input</TH><TH WIDTH="350">output</TH></TR><TR><TD><PRE>4 3
1 2 10 20
2 4 50 20
4 3 20 30
1 3 10 30
</PRE></TD><TD><PRE>3
1 2 3
</PRE></TD></TR></TABLE><DIV CLASS="problem_source"><B>Problem Author: </B>Dmitry Ivankov<BR><B>Problem Source: </B>Ural Championship 2012<BR></DIV></DIV></DIV><DIV><B>Tags: </B><A HREF="problemset.aspx?space=1&amp;tag=graphs">graph theory</A>  <SPAN CLASS="problem_tags_toggle">(<FORM METHOD="POST" ACTION="problem.aspx?space=1&amp;num=1905" STYLE="display:inline;" ID="ToggleTagsForm"><A HREF="problem.aspx?space=1&amp;num=1905" ONCLICK="document.getElementById('ToggleTagsForm').submit();return false;"><INPUT TYPE="hidden" NAME="Action" VALUE="HideTags">hide tags for unsolved problems</A></FORM>)</SPAN></DIV><DIV CLASS="problem_links"><SPAN>Difficulty: 830</SPAN>    <A HREF="print.aspx?space=1&amp;num=1905" TARGET="_blank">Printable version</A>    <A HREF="submit.aspx?space=1&amp;num=1905">Submit solution</A>    <A HREF="forum/?space=1&amp;num=1905">Discussion (5)</A><BR><A HREF="status.aspx?space=1&amp;num=1905">All submissions (2218)</A>    <A HREF="status.aspx?space=1&amp;num=1905&amp;status=accepted">All accepted submissions (282)</A>    <A HREF="rating.aspx?space=1&amp;num=1905">Solutions rating (162)</A></DIV></TD></TR></TABLE></TD></TR><TR><TD CLASS="footer"><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""></div></noscript>© 2000–2016 <A HREF="/team.aspx">Timus Online Judge Team</A>. All rights reserved.</TD></TR></TABLE></BODY></HTML>
